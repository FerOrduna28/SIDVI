<ion-content >
  <ion-split-pane contentId="main">
    <!--  menu de la izquierda  -->
    <ion-menu contentId="main">
      <div class='card text-center m-3 p-2'>
        Consultorios
      </div>
       <!--  for list de consultorios -->
      <div class="lista">
        <div   *ngFor="let con of consultoriosList" >
          <div class="boton" [ngClass]="{'btn-item': consultorio != con,'btn-item-selected': consultorio==con}"  (click)= verConsultorio(con)>
            <div class="circulo" [ngClass]="{'habilitado': con.estatus === 'HABILITADO', 'deshabilitado': con.estatus === 'DESHABILITADO', 'en-proceso': con.estatus === 'EN_ESPERA'}"></div>
            <div class='btn-text d-inline-block'  [ngClass]="{'cross': con.estatus === 'RECHAZADO'}"> {{con.nombreConsultorio}}</div>
          </div> 
        </div>
      </div>
    <div class="btn btn-info d-inline-block text-white m-1"  type="submit" (click)="crearConsultorioBtn()">
      Registrar Consultorio
    </div>
  </ion-menu>
  
  <!-- the main content -->
  <ion-router-outlet id="main" >
    <ion-header>
      <ion-toolbar>
        <ion-buttons slot="start">
          <ion-menu-button></ion-menu-button>
        </ion-buttons>
        <ion-title>
          <span>Consultorio</span>
        </ion-title>
      </ion-toolbar>
    </ion-header>
    <!-- status dropdown-->
    <div class="alignRight" *ngIf="!crearConsultorio">
      <div>
          <ion-list>
            <ion-item>
              <ion-label> STATUS:</ion-label>
              <ion-select interface="popover" >
                <ion-select-option value="HABILITADO" >VISIBLE</ion-select-option>
                <ion-select-option value="DESHABILITADO"  >OCULTO</ion-select-option>
              </ion-select>
            </ion-item>
          </ion-list>
      </div>
      <div class="helpBtn">
        <div class="icon pointer"></div>
      </div>
       
    </div>
    <div class="fondo" >
      <form [formGroup]="consultorioForm" >
        <div class="row">
              <!--  consultorio image  -->
          <div class="col col-md-4">
            <div class="imagenConsultorioContainer">
              <img id="imagenConsultorio" src="../../../assets/images/no-imagen.jpg" alt="imagen del consultorio">
            </div>
            <div class="form-group">
              <input [src]="consultorio.archivoIconoImg" type="file" accept="image/*" class="form-control-file" id=""  formControlName="imagen" >
            </div>
          </div>
          
          <div class="col col-md-8 preguntasDoctor">
            <!--  nombre doctor  -->
            <div class="input-group columna">
              <div class="input-group">
                <div class="input-group-prepend">
                  <span class="input-group-text" id="inputGroupPrepend"><img src="../../../assets/images/medicine.png" alt="doctor pin" class="icon"></span>
                </div>
                <input [(ngModel)]="consultorio.nombreDoctor" type="text" id="nombreDoctor" name="nombreDoctor" placeholder="Nombre del doctor" class="form-control" style="background-color:white" aria-describedby="inputGroupPrepend" formControlName="nombreDoctor"   [required] = "crearConsultorio"  [readonly] = "!crearConsultorio" >
              </div>
              <div class="feedback"  *ngIf="consultorioForm.controls.nombreDoctor.errors && (consultorioForm.controls.nombreDoctor.touched || hayErrores)">
                <div  *ngIf="consultorioForm.controls.nombreDoctor.errors.required">
                  Ingresa el nombre del doctor.            
                </div>
              </div>
            </div>
            <!--  cédula profesional doctor -->
            <div class="input-group columna">
              <div  class="input-group">
                <div class="input-group-prepend">
                  <span class="input-group-text" id="inputGroupPrepend"><img src="../../../assets/images/paper.png" alt="doctor pin" class="icon"></span>
                </div>
                  <input [(ngModel)]="consultorio.cedulaProfesional" type="text" placeholder="Cédula del doctor" class="form-control" style="background-color:white" aria-describedby="inputGroupPrepend"  formControlName="cedula"  [required] = "crearConsultorio"  [readonly] = "!crearConsultorio" >
                </div>
                <div class="feedback"  *ngIf="consultorioForm.controls.cedula.errors && (consultorioForm.controls.cedula.touched || hayErrores)">
                  <div  *ngIf="consultorioForm.controls.cedula.errors.required">
                    Ingresa la cédula profesional.
                  </div>  
                </div>
              </div>
              <!--  nombre del consultorio  -->
              <div class="input-group columna">
                <div class="input-group">
                  <div class="input-group-prepend">
                    <span class="input-group-text" id="inputGroupPrepend"><img src="../../../assets/images/hospital.png" alt="doctor pin" class="icon"></span>
                  </div>
                  <input [(ngModel)]="consultorio.nombreConsultorio" type="text" id="nombreConsultorio" name="nombreConsultorio"  placeholder="Nombre del consultorio" class="form-control" style="background-color:white" aria-describedby="inputGroupPrepend" formControlName="nombreConsultorio"  [required] = "crearConsultorio"  [readonly] = "!crearConsultorio" >
                </div>
                <div class="feedback"  *ngIf="consultorioForm.controls.nombreConsultorio.errors && (consultorioForm.controls.nombreConsultorio.touched || hayErrores)">
                  <div  *ngIf="consultorioForm.controls.nombreConsultorio.errors.required">
                    Ingresa el nombre del consultorio.            
                  </div>
                </div>
              </div>
              <!--  telefono -->
              <div class="input-group columna">
                <div class="input-group">
                  <div class="input-group-prepend">
                    <span class="input-group-text" id="inputGroupPrepend"><img src="../../../assets/images/phone.png" alt="phone pin" class="icon"></span>
                  </div>
                  <input [(ngModel)]="consultorio.telefonoConsultorio" type="text" placeholder="Teléfono del consultorio" class="form-control" style="background-color:white" aria-describedby="inputGroupPrepend"  formControlName="telefonoConsultorio"  [required] = "crearConsultorio"  [readonly] = "!crearConsultorio" >
                </div>
                <div class="feedback"  *ngIf="consultorioForm.controls.telefonoConsultorio.errors && (consultorioForm.controls.telefonoConsultorio.touched || hayErrores)">
                  <div *ngIf="consultorioForm.controls.telefonoConsultorio.errors.required">
                    Ingresa el teléfono.
                  </div> 
                </div>
              </div>

            </div>
            
          </div>    <!--cierre del row. Preguntas del doctor-->
          <!--Direccion-->
          <div class="input-group columna">
            <div class="input-group">
              <div class="input-group-prepend">
                <span class="input-group-text" id="inputGroupPrepend"><img src="../../../assets/images/pin.png" alt="location pin" class="icon"></span>
              </div>
              <input [(ngModel)]="consultorio.direccionConsultorio" type="text" placeholder="Dirección de consultorio" class="form-control" style="background-color:white" formControlName="direccionConsultorio" aria-describedby="inputGroupPrepend"  [required] = "crearConsultorio"  [readonly] = "!crearConsultorio" >
            </div>
            <div class="feedback"   *ngIf="consultorioForm.controls.direccionConsultorio.errors && (consultorioForm.controls.direccionConsultorio.touched || hayErrores)">
              <div *ngIf="consultorioForm.controls.direccionConsultorio.errors.required">
                Ingresa una dirección.
              </div>
            </div>
          </div>
          <br>
          <!--ubicacion-->
          <div class="form-row" *ngIf="crearConsultorio">
            <div class="card">
              <div class="card header">
                <div class="input-group-prepend">
                  <span class="input-group-text" id="inputGroupPrepend"><img src="../../../assets/images/pin.png" alt="location pin" class="icon"></span>
                </div>
                <div class="textCenterVertical">
                  <p class="card-subtitle mb-2 text-muted">Seleccione la localidad</p>
                </div>
              </div>
              <div class="lista">
                <app-ubicacion-list [ubicacion]="ubicacion" (selected)="ubicacionSelected($event)"></app-ubicacion-list>
              </div>
            </div>
            <div class="feedback"  *ngIf=" consultorio.fkUbicacion == -1 && hayErrores">
                Selecciona una ubicación.
            </div>
          </div>
           <!--ubicacion no editable-->
          <div class="form-row" *ngIf="!crearConsultorio">
            <div class="card">
              <div class="card header">
                <div class="input-group-prepend">
                  <span class="input-group-text" id="inputGroupPrepend"><img src="../../../assets/images/pin.png" alt="location pin" class="icon"></span>
                </div>
                <div class="textCenterVertical">
                  <p class="text-muted">{{ubiName}}</p>
                </div>
              </div>
            </div>
          </div>
          <br>
          <!-- virus que conoce -->
          <div class="input-froup columna"  *ngIf="crearConsultorio">
            <div>
              <p>Seleccione todos los virus con los que tiene experiencia:</p>
            </div>
              <ion-list>
                <ion-item *ngFor="let v of virus">
                  <ion-label>{{v.nombre}}</ion-label>
                  <ion-checkbox slot="end" [(ngModel)]="entry.isChecked"></ion-checkbox>
                </ion-item>
              </ion-list>
          </div>


           <!--descripcion -->
          <div class="form-group columna" *ngIf="crearConsultorio">
            <textarea [(ngModel)]="consultorio.descripcion" placeholder="Descripcion o información extra" class="form-control" id="exampleFormControlTextarea1" rows="3"  formControlName="descripcion" required></textarea>
            <div class="feedback"   *ngIf="consultorioForm.controls.descripcion.errors && (consultorioForm.controls.descripcion.touched || hayErrores)">
              <div *ngIf="consultorioForm.controls.descripcion.errors.required">
                Ingresa una descripcion.
              </div>
            </div>
          </div>
          <!--descripcion no editable -->
          <div class="form-group columna" *ngIf="!crearConsultorio">
            <div class="card">
              <p class="text-muted descripcion">{{consultorio.descripcion}}</p>
            </div>
          </div>
          <!--botones-->
          <div class="buttons">
            <div *ngIf="crearConsultorio" class="btn btn-info d-inline-block text-white m-1">
              Vista Previa
            </div>
            <div *ngIf="crearConsultorio" class="btn btn-info d-inline-block text-white m-1"  type="submit" (click)="registrar()">
              Registrar
            </div>
            <div *ngIf="!crearConsultorio" class="btn btn-info d-inline-block text-white m-1">
              Editar
            </div>
            <div *ngIf="!crearConsultorio" class="btn btn-info d-inline-block text-white m-1"  type="" >
              Eliminar
            </div>
          </div>
        </form>
      </div>
    </ion-router-outlet>
  </ion-split-pane>

  
</ion-content>