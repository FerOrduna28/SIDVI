<ion-split-pane contentId='main'>
    <ion-menu menuId='sidebar' contentId='main'>
        <ion-content class='sidebar-menu'>
            <div class='m-3'>
                <div class='card text-center p-2 mb-2'>
                    Ubicaciones
                </div>            
                <app-ubicacion-list [ubicacion]="ubicacion"></app-ubicacion-list>
                <div class='card text-center p-2 mt-3 mb-2'>
                    Categoria
                </div>  
                <div class='form-group'>
                    <select class='form-control' #idCategoriaSelected value='-1' (change)="updateCategoria(idCategoriaSelected.value)">
                        <option disabled selected [value]="-1">SELECCIONA TU CATEGORIA</option>
                        <option *ngFor="let cat of categorias" [value]="cat.idCategoriaEstadistica">{{cat.nombre}}</option>
                    </select>
                </div>
                <div class='card text-center p-2 mt-3 mb-2'>
                    Eje Horizontal
                </div> 
                <div class='form-check'>
                    <input class='form-check-input' type='radio' name='radios-eje-horizontal' id='radio-subcategoria' [value]="true" [(ngModel)]="subcategoriaEjeHorizontal">
                    <label class='form-check-label' for='radio-subcategoria'>Subcategorias</label>
                </div> 
                <div class='form-check'>
                    <input class='form-check-input' type='radio' name='radios-eje-horizontal' id='radio-riempo' [value]="false" [(ngModel)]="subcategoriaEjeHorizontal">
                    <label class='form-check-label' for='radio-riempo'>Tiempo</label>
                </div>
                <div class='form-group mt-1' *ngIf="subcategoriaEjeHorizontal == false">
                    <select id='input-categoria' class='form-control' value='-1' #idSubcategoriaSelected (change)="updateSubcategoria(idSubcategoriaSelected.value)">
                        <option disabled selected [value]="-1">SUBCATEGORIA A GRAFICAR</option>
                        <option *ngFor="let subcat of categoriaSelected.subcategoriaEstadisticas" [value]="subcat.idSubcategoriaEstadistica">{{subcat.nombre}}</option>
                    </select>
                </div>
                <div class='card text-center p-2 mt-3 mb-2'>
                    Agrupar
                </div>
                <div class='form-check'>
                    <input class='form-check-input' type='radio' name='radios-agrupar' id='radio-riempo' [value]="1" [(ngModel)]="agrupacionOpcion">
                    <label class='form-check-label' for='radio-riempo'>No agrupar y sin ningun filtro</label>
                </div>
                <div class='form-check'>
                    <input class='form-check-input' type='radio' name='radios-agrupar' id='radio-subcategoria' [value]="2" [(ngModel)]="agrupacionOpcion">
                    <label class='form-check-label' for='radio-subcategoria'>Agrupar por Categoria</label>
                </div> 
                <div class='form-check'>
                    <input class='form-check-input' type='radio' name='radios-agrupar' id='radio-riempo' [value]="3" [(ngModel)]="agrupacionOpcion">
                    <label class='form-check-label' for='radio-riempo'>No agrupar y a√±adir filtro</label>
                </div>
                <div class='form-group mt-2' *ngIf="agrupacionOpcion >= 2">
                    <select id='input-categoria' class='form-control' value='-1' #idCategoriaSelectedGrupo (change)="updateCategoriaGrupo(idCategoriaSelectedGrupo.value)">
                        <option disabled selected [value]="-1">SELECCIONA TU CATEGORIA</option>
                        <option *ngFor="let cat of categorias" [value]="cat.idCategoriaEstadistica">{{cat.nombre}}</option>
                    </select>
                </div>
                <div class='form-group' *ngIf="agrupacionOpcion == 3">
                    <select id='input-categoria' class='form-control' value='-1' #idSubcategoriaSelectedGrupo (change)="updateSubcategoriaGrupo(idSubcategoriaSelectedGrupo.value)">
                        <option disabled selected [value]="-1">SELECCIONA TU SUBCATEGORIA</option>
                        <option *ngFor="let subcat of categoriaSelectedGrupo.subcategoriaEstadisticas" [value]="subcat.idSubcategoriaEstadistica">{{subcat.nombre}}</option>
                    </select>
                </div>
                <div class='text-center btn-info p-2 filtro mt-3' (click)="filtrarEstadisticas()">
                    Filtrar
                </div>  
            </div> 
        </ion-content>
    </ion-menu>
    <ion-router-outlet id="main">
        <ion-header>
            <ion-toolbar>
                <ion-buttons slot="start">
                    <ion-menu-button></ion-menu-button>
                </ion-buttons>
                <ion-title>
                    <span>Estadisticas ({{virus.nombre}})</span>
                </ion-title>
            </ion-toolbar>
        </ion-header>
        <ion-content>
            <div class='m-5' *ngFor="let estadistica of estadisticas">
                <div class='d-flex justify-content-center'>{{estadistica.nombre}}</div>
                <div style="display: block;">
                  <canvas mdbChart height='100px'
                      [chartType]="estadistica.localChartType"
                      [datasets]="estadistica.localChartDatasets"
                      [labels]="estadistica.localChartLabels"
                      [colors]="estadistica.localChartColors"
                      [options]="estadistica.localChartOptions">
                  </canvas>
                </div>
            </div>
        </ion-content>
    </ion-router-outlet>
</ion-split-pane>

  