<ion-header id='encabezado' class="header">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title>
      <span class="textHeader">Editar estad√≠sticas</span>
    </ion-title>
  </ion-toolbar>
</ion-header>
<ion-content>
    <div class='m-3 p-3 cardzote' *ngIf="graficaEstadistica != null">
        <div class='card text-center p-2 mb-2'>
            Ubicaciones
        </div>
        <app-ubicacion-list [ubicacion]="graficaEstadistica.ubicacion" (selected)="ubicacionSelected($event)"></app-ubicacion-list>
        <div class='card text-center p-2 mt-5 mb-2'>
            Categoria
        </div>
        <div class='form-group'>
            <select class='form-control' [(ngModel)]="graficaEstadistica.idCategoriaSelected" #idCategoriaSelected (change)="updateCategoria(idCategoriaSelected.value)">
                <option disabled selected [value]="-1">SELECCIONA TU CATEGORIA</option>
                <option *ngFor="let cat of categorias" [value]="cat.idCategoriaEstadistica">{{cat.nombre}}</option>
            </select>
        </div>
        <div class='form-group mt-1'>
            <select id='input-categoria' class='form-control' [(ngModel)]="graficaEstadistica.idSubcategoriaSelected" (change)="updateSubcategoria()">
                <option disabled selected [value]="-1">SUBCATEGORIA A GRAFICAR</option>
                <option *ngFor="let subcat of graficaEstadistica.categoriaSelected.subcategoriaEstadisticas" [value]="subcat.idSubcategoriaEstadistica">{{subcat.nombre}}</option>
            </select>
        </div>
        <div class='card text-center p-2 mt-5 mb-2'>
            <div class="form-check">
                <input type="checkbox" class="form-check-input" id="segunda-categoria" [(ngModel)]="segundaCategoria">
                <label class="form-check-label" for="segunda-categoria">Especificar Segunda Categoria</label>
              </div>
        </div>  
        <div *ngIf="segundaCategoria == true">        
            <div class='form-group mt-2'>
                <select id='input-categoria' class='form-control' [(ngModel)]="graficaEstadistica.idCategoriaSelectedGrupo" (change)="updateCategoriaGrupo()">
                    <option disabled selected [value]="-1">SELECCIONA TU CATEGORIA</option>
                    <option *ngFor="let cat of categorias" [value]="cat.idCategoriaEstadistica">{{cat.nombre}}</option>
                </select>
            </div>
            <div class='form-group'>
                <select id='input-categoria' class='form-control' [(ngModel)]="graficaEstadistica.idSubcategoriaSelectedGrupo" (change)="updateSubcategoriaGrupo()">
                    <option disabled selected [value]="-1">SELECCIONA TU SUBCATEGORIA</option>
                    <option *ngFor="let subcat of graficaEstadistica.categoriaSelectedGrupo.subcategoriaEstadisticas" [value]="subcat.idSubcategoriaEstadistica">{{subcat.nombre}}</option>
                </select>
            </div>
        </div>  
        <div class='card text-center p-2 mt-5 mb-2'>
            Fecha
        </div>
        <div class='form-group mr-3 ml-3 mb-0 mt-0 p-2'>
            <input id='fecha-inicio' class='form-control' type='date' [(ngModel)]="fecha" placeholder='Fecha de Estadistica' required>
        </div>

        <div class='text-center btn-info p-2 filtro mt-5' (click)="filtrarEstadisticas()">
            Consultar
        </div>
    </div> 

</ion-content>
